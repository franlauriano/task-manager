name: Create Task API Test - Success (Corner Cases)
version: "1.0"
testcases:
  - name: Create task - Success (with special characters and Unicode)
    steps:
      - type: http
        method: POST
        url: "{{.base_url}}/api/tasks"
        headers:
          Content-Type: "application/json"
          Accept: "application/json"
        body: |
          {
            "title": "Tarefa com acentos √°√©√≠√≥√∫ √ß√£o",
            "description": "Descri√ß√£o com emojis üöÄ ‚úÖ üìù e caracteres especiais @#$%&*()"
          }
        assertions:
          - result.statuscode ShouldEqual 200
          - result.bodyjson ShouldNotBeNil
          - result.bodyjson ShouldContainKey "uuid"
          - result.bodyjson.title ShouldEqual "Tarefa com acentos √°√©√≠√≥√∫ √ß√£o"
          - result.bodyjson.description ShouldEqual "Descri√ß√£o com emojis üöÄ ‚úÖ üìù e caracteres especiais @#$%&*()"
          - result.bodyjson ShouldContainKey "status"
          - result.bodyjson.status ShouldEqual "to_do"
          - result.bodyjson ShouldContainKey "created_at"
          - result.bodyjson ShouldContainKey "updated_at"

  - name: Create task - Success (with control characters that get trimmed)
    steps:
      - type: http
        method: POST
        url: "{{.base_url}}/api/tasks"
        headers:
          Content-Type: "application/json"
          Accept: "application/json"
        body: |
          {
            "title": "   Task with leading and trailing spaces   ",
            "description": "\tDescription with tabs and newlines\n"
          }
        assertions:
          - result.statuscode ShouldEqual 200
          - result.bodyjson ShouldNotBeNil
          - result.bodyjson ShouldContainKey "uuid"
          - result.bodyjson.title ShouldEqual "Task with leading and trailing spaces"
          - result.bodyjson.description ShouldEqual "Description with tabs and newlines"
          - result.bodyjson ShouldContainKey "status"
          - result.bodyjson.status ShouldEqual "to_do"
          - result.bodyjson ShouldContainKey "created_at"
          - result.bodyjson ShouldContainKey "updated_at"
